<header>
  <style>
    .user-menu { position: relative; }
    .user-menu-button {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 10px;
      font-size: 12px;
      border: 1px solid var(--border);
      border-radius: 10px;
      background: linear-gradient(135deg, rgba(20,24,41,0.6), rgba(20,24,41,0.3));
      color: var(--text);
      cursor: pointer;
    }
    .user-menu-button:hover { filter: brightness(1.05); }
    .user-menu-caret { opacity: 0.7; }
    .user-dropdown {
      position: absolute;
      right: 0;
      top: calc(100% + 6px);
      min-width: 180px;
      background: linear-gradient(135deg, rgba(20,24,41,1), rgba(20,24,41,1));
      border: 1px solid var(--border);
      border-radius: 12px;
      box-shadow: 0 6px 24px rgba(0,0,0,0.35);
      padding: 6px;
      display: none;
      z-index: 10;
      backdrop-filter: none;
    }
    .user-dropdown a,
    .user-dropdown button {
      width: 100%;
      text-align: left;
      padding: 10px 10px;
      border-radius: 8px;
      background: transparent;
      border: none;
      color: var(--text);
      font: inherit;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 13px;
    }
    .user-dropdown a:hover,
    .user-dropdown button:hover { 
      background: rgba(77, 217, 255, 0.08);
      color: var(--accent);
    }
    .dropdown-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .user-dropdown-sep { height: 1px; background: var(--border); margin: 6px 0; }
    @media (max-width: 900px) {
      #headerContainer {
        flex-direction: column !important;
        gap: 8px !important;
        align-items: center !important;
      }
      #headerContainer > div:first-child {
        width: 100%;
        flex-direction: column !important;
        align-items: center !important;
        gap: 8px !important;
      }
      #headerBranding a {
        flex-direction: column;
        text-align: center;
      }
      #headerControls {
        width: 100%;
        justify-content: center !important;
        flex-direction: column !important;
      }
      #authStatus {
        width: 100%;
        align-items: center !important;
      }
    }
  </style>
  <div id="headerContainer" style="display:flex; justify-content:space-between; align-items:center; gap:16px; padding:12px 16px; width:100%;">
    <div style="display:flex; align-items:center; gap:16px;">
      <div id="headerBranding" style="display:flex; align-items:flex-start; gap:12px;">
        <a id="logoLink" href="/" style="text-decoration:none; color:inherit; display:flex; align-items:flex-start; gap:12px;">
          <img src="assets/PromptSyncLogo.svg" alt="PromptSync" style="width:36px; height:36px; flex-shrink:0; object-fit:contain;">
          <div>
            <div style="font-size:24px; font-weight:900; letter-spacing:0.5px; line-height:1.2;">PromptSync</div>
            <div style="color:var(--muted); font-size:12px; margin-top:2px; word-break:break-word;">Share and amplify your team's AI knowledge.</div>
            <div id="appVersion" style="color:var(--muted); font-size:10px; opacity:0.7; margin-top:2px;"></div>
          </div>
        </a>
      </div>

      <div id="headerControls" style="display:flex; gap:8px; align-items:center;">
        <div class="pill" id="repoPill" style="white-space:nowrap;">Loading repo...</div>
        <label style="display:flex; align-items:center; gap:4px; white-space:nowrap; position:relative;">
          <select id="branchSelect" class="btn" style="min-width:140px; padding-right:28px;">
            <option>Loading branchesâ€¦</option>
          </select>
          <span title="Choose a branch" style="position:absolute; right:8px; pointer-events:none;">â–¼</span>
        </label>
      </div>
    </div>

    <div id="authStatus" style="display:flex; flex-direction:column; align-items:flex-end; gap:6px; font-size:13px; flex-shrink:0;">
      <div id="userMenu" class="user-menu">
        <button id="userMenuButton" class="user-menu-button" aria-haspopup="true" aria-expanded="false">
          <span id="userDisplay" style="display:inline-flex; align-items:center; gap:6px;">
            <img id="userAvatar" src="" alt="" style="width:18px; height:18px; border-radius:50%; display:none;">
            <strong id="userName">Guest</strong>
          </span>
          <span class="user-menu-caret">â–¾</span>
        </button>
        <div id="userMenuDropdown" class="user-dropdown" role="menu" aria-labelledby="userMenuButton">
          <button id="headerSignIn" class="dropdown-item" role="menuitem" style="justify-content: center;">ðŸ”‘ Sign In with GitHub</button>
          <button id="headerSignOut" class="dropdown-item" role="menuitem" style="display:none; justify-content: center;">ðŸšª Sign Out</button>
        </div>
      </div>
      <a href="https://github.com/ole-vi/prompt-sharing/blob/main/README.md" target="_blank" rel="noopener" class="help-link" title="View documentation" style="padding:6px 10px; font-size:12px;">ðŸ“– Help</a>
    </div>
  </div>
</header>
